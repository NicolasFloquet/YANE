#include <stdio.h>
#include <stdlib.h>

typedef enum {
    AM_IMPLICITE,
    AM_ACCUMULATEUR,
    AM_IMMEDIAT,
    AM_DIRECT,
    AM_PAGEZERO,
    AM_DIRECTINDEX_X,
    AM_DIRECTINDEX_Y,
    AM_DIRECTINDEXPZ_X,
    AM_DIRECTINDEXPZ_Y,
    AM_RELATIF,
    AM_INDIRECT,
    AM_PREINDEXDIRECT,
    AM_PREINDEXINDIRECT
}addr_mode;

typedef enum {
    I_UNK,
    I_ADC,
    I_AND,
    I_ASL,
    I_BCC,
    I_BCS,
    I_BEQ,
    I_BIT,
    I_BMI,
    I_BNE,
    I_BPL,
    I_BRK,
    I_BVC,
    I_BVS,
    I_CLC,
    I_CLD,
    I_CLI,
    I_CLV,
    I_CMP,
    I_CPX,
    I_CPY,
    I_DEC,
    I_DEX,
    I_DEY,
    I_EOR,
    I_INC,
    I_INX,
    I_INY,
    I_JMP,
    I_JSR,
    I_LDA,
    I_LDX,
    I_LDY,
    I_LSR,
    I_NOP,
    I_ORA,
    I_PHA,
    I_PHP,
    I_PLA,
    I_PLP,
    I_ROL,
    I_ROR,
    I_RTI,
    I_RTS,
    I_SBC,
    I_SEC,
    I_SED,
    I_SEI,
    I_STA,
    I_STX,
    I_STY,
    I_TAX,
    I_TAY,
    I_TSX,
    I_TXA,
    I_TXS,
    I_TYA
}Instruction_Index;

typedef struct {
    char* name;
}Instruction;

typedef struct {
    unsigned char op_code;
    addr_mode mode;
    Instruction_Index inst;
}OpCode;

Instruction instruction_list[57]={
	{"UNK"},
	{"ADC"},{"AND"},{"ASL"},{"BCC"},{"BCS"},
	{"BEQ"},{"BIT"},{"BMI"},{"BNE"},{"BPL"},
	{"BRK"},{"BVC"},{"BVS"},{"CLC"},{"CLD"},
	{"CLI"},{"CLV"},{"CMP"},{"CPX"},{"CPY"},
	{"DEC"},{"DEX"},{"DEY"},{"EOR"},{"INC"},
	{"INX"},{"INY"},{"JMP"},{"JSR"},{"LDA"},
	{"LDX"},{"LDY"},{"LSR"},{"NOP"},{"ORA"},
	{"PHA"},{"PHP"},{"PLA"},{"PLP"},{"ROL"},
	{"ROR"},{"RTI"},{"RTS"},{"SBC"},{"SEC"},
	{"SED"},{"SEI"},{"STA"},{"STX"},{"STY"},
	{"TAX"},{"TAY"},{"TSX"},{"TXA"},{"TXS"},
	{"TYA"}

};

/** TODO

	Ajouter les opcode pour: 
	{"BCS"},
	{"BVC"},{"BVS"},{"CLC"},{"CLD"},
	{"DEC"},{"DEX"},{"DEY"},{"EOR"},
	{"INX"},{"INY"},{"JSR"},{"LDA"},
	{"LDY"},{"LSR"},{"NOP"},{"ORA"},
	{"PHA"},{"PLP"},{"ROL"},
	{"ROR"},{"SBC"},{"SEC"},
	{"STA"},{"STX"},{"STY"},

*/


OpCode opcode_list[256]={
    {0x0, AM_IMPLICITE, I_BRK},
    {0x1,0,0},
    {0x2,0,0},
    {0x3,0,0},
    {0x4,0,0},
    {0x5,0,0},
    {0x6, AM_PAGEZERO, I_ASL},
    {0x7,0,0},
    {0x8, I_IMPLICITE, I_PHP},
    {0x9,0,0},
    {0xa, AM_ACCUMULATEUR, I_ASL},
    {0xb,0,0},
    {0xc,0,0},
    {0xd,0,0},
    {0xe, AM_DIRECT, I_ASL},
    {0xf,0,0},
    {0x10, AM_IMPLICITE, I_BPL},
    {0x11,0,0},
    {0x12,0,0},
    {0x13,0,0},
    {0x14,0,0},
    {0x15,0,0},
    {0x16, AM_DIRECTINDEXPZ_X, I_ASL},
    {0x17,0,0},
    {0x18,0,0},
    {0x19,0,0},
    {0x1a,0,0},
    {0x1b,0,0},
    {0x1c,0,0},
    {0x1d,0,0},
    {0x1e, AM_DIRECTINDEX_X, I_ASL},
    {0x1f,0,0},
    {0x20,0,0},
    {0x21, AM_PREINDEXDIRECT, I_AND},
    {0x22,0,0},
    {0x23,0,0},
    {0x24, AM_PAGEZERO, I_BIT},
    {0x25, AM_PAGEZERO, I_AND},
    {0x26,0,0},
    {0x27,0,0},
    {0x28,0,0},
    {0x29, AM_IMMEDIAT, I_AND},
    {0x2a,0,0},
    {0x2b, AM_DIRECT, I_BIT},
    {0x2c,0,0},
    {0x2d, AM_DIRECT, I_AND},
    {0x2e,0,0},
    {0x2f,0,0},
    {0x30, AM_RELATIF, I_BMI},
    {0x31, AM_PREINDEXINDIRECT, I_AND},
    {0x32,0,0},
    {0x33,0,0},
    {0x34,0,0},
    {0x35, AM_DIRECINDEXPZ_X, I_AND},
    {0x36,0,0},
    {0x37,0,0},
    {0x38, AM_IMPLICITE, I_SEC},
    {0x39, AM_DIRECTINDEX_Y, I_AND},
    {0x3a,0,0},
    {0x3b,0,0},
    {0x3c,0,0},
    {0x3d, AM_DIRECTINDEX_X, I_AND},
    {0x3e,0,0},
    {0x3f,0,0},
    {0x40, AM_IMPLICITE, I_RTI},
    {0x41,0,0},
    {0x42,0,0},
    {0x43,0,0},
    {0x44,0,0},
    {0x45,0,0},
    {0x46,0,0},
    {0x47,0,0},
    {0x48,0,0},
    {0x49,0,0},
    {0x4a,0,0},
    {0x4b,0,0},
    {0x4c, AM_DIRECT, I_JMP},
    {0x4d,0,0},
    {0x4e,0,0},
    {0x4f,0,0},
    {0x50,0,0},
    {0x51,0,0},
    {0x52,0,0},
    {0x53,0,0},
    {0x54,0,0},
    {0x55,0,0},
    {0x56,0,0},
    {0x57,0,0},
    {0x58, AM_IMPLICITE, I_CLI},
    {0x59,0,0},
    {0x5a,0,0},
    {0x5b,0,0},
    {0x5c,0,0},
    {0x5d,0,0},
    {0x5e,0,0},
    {0x5f,0,0},
    {0x60, AM_IMPLICITE, I_RTS},
    {0x61, AM_PREINDEXDIRECT, I_ADC},
    {0x62,0,0},
    {0x63,0,0},
    {0x64,0,0},
    {0x65, AM_PAGEZERO, I_ADC},
    {0x66,0,0},
    {0x67,0,0},
    {0x68, AM_IMPLICITE, I_PLA},
    {0x69, AM_IMMEDIAT, I_ADC},
    {0x6a,0,0},
    {0x6b,0,0},
    {0x6c, AM_INDIRECT, I_JMP},
    {0x6d, AM_DIRECT, I_ADC},
    {0x6e,0,0},
    {0x6f,0,0},
    {0x70,0,0},
    {0x71, AM_PREINDEXINDIRECT, I_ADC},
    {0x72,0,0},
    {0x73,0,0},
    {0x74,0,0},
    {0x75, AM_DIRECTINDEXPZ_X, I_ADC},
    {0x76,0,0},
    {0x77,0,0},
    {0x78, AM_IMPLICITE, I_SEI},
    {0x79, AM_DIRECTINDEX_Y, I_ADC},
    {0x7a,0,0},
    {0x7b,0,0},
    {0x7c,0,0},
    {0x7d, AM_DIRECTINDEX_X, I_ADC},
    {0x7e,0,0},
    {0x7f,0,0},
    {0x80,0,0},
    {0x81,0,0},
    {0x82,0,0},
    {0x83,0,0},
    {0x84,0,0},
    {0x85,0,0},
    {0x86,0,0},
    {0x87,0,0},
    {0x88,0,0},
    {0x89,0,0},
    {0x8a, AM_IMPLICITE, I_TXA},
    {0x8b,0,0},
    {0x8c,0,0},
    {0x8d,0,0},
    {0x8e,0,0},
    {0x8f,0,0},
    {0x90,0,0},
    {0x91,0,0},
    {0x92,0,0},
    {0x93,0,0},
    {0x94,0,0},
    {0x95,0,0},
    {0x96,0,0},
    {0x97,0,0},
    {0x98, AM_IMPLICITE, I_TYA},
    {0x99,0,0},
    {0x9a, AM_IMPLICITE, I_TXS},
    {0x9b,0,0},
    {0x9c,0,0},
    {0x9d,0,0},
    {0x9e,0,0},
    {0x9f,0,0},
    {0xa0, AM_IMMEDIAT, I_LDX},
    {0xa1,0,0},
    {0xa2,0,0},
    {0xa3,0,0},
    {0xa4,0,0},
    {0xa5,0,0},
    {0xa6, AM_PAGEZERO, I_LDX},
    {0xa7,0,0},
    {0xa8, AM_IMPLICITE, I_TAY},
    {0xa9,0,0},
    {0xaa,0,0},
    {0xab,0,0},
    {0xac,0,0},
    {0xad,0,0},
    {0xae, AM_DIRECT, I_LDX},
    {0xaf,0,0},
    {0xb0, AM_RELATIF, I_BCC}, //XXX aussi l'opcode de I_BCS, Ã  voir
    {0xb1,0,0},
    {0xb2,0,0},
    {0xb3,0,0},
    {0xb4,0,0},
    {0xb5,0,0},
    {0xb6, AM_DIRECTINDEXPZ_Y, I_LDX},
    {0xb7,0,0},
    {0xb8, AM_IMPLICITE, I_CLV},
    {0xb9,0,0},
    {0xba, AM_IMPLICITE, I_TSX},
    {0xbb,0,0},
    {0xbc,0,0},
    {0xbd,0,0},
    {0xbe, AM_DIRECTINDEX_X, I_LDX},
    {0xbf,0,0},
    {0xc0, AM_IMMEDIAT, I_CPY},
    {0xc1, AM_PREINDEXDIRECT, I_CMP},
    {0xc2,0,0},
    {0xc3,0,0},
    {0xc4, AM_PAGEZERO, I_CPY},
    {0xc5, AM_PAGEZERO, I_CMP},
    {0xc6,0,0},
    {0xc7,0,0},
    {0xc8,0,0},
    {0xc9, AM_IMMEDIAT, I_CMP},
    {0xca,0,0},
    {0xcb,0,0},
    {0xcc, AM_DIRECT, I_CPY},
    {0xcd, AM_DIRECT, I_CMP},
    {0xce,0,0},
    {0xcf,0,0},
    {0xd0, AM_RELATIF, I_BNE},
    {0xd1, AM_PREINDEXINDIRECT, I_CMP},
    {0xd2,0,0},
    {0xd3,0,0},
    {0xd4,0,0},
    {0xd5, AM_DIRECTINDEXPZ_X, I_CMP},
    {0xd6,0,0},
    {0xd7,0,0},
    {0xd8,0,0},
    {0xd9, AM_DIRECTINDEX_Y, I_CMP},
    {0xda,0,0},
    {0xdb,0,0},
    {0xdc,0,0},
    {0xdd, AM_DIRECTINDEX_X, I_CMP},
    {0xde,0,0},
    {0xdf,0,0},
    {0xe0, AM_IMMEDIAT, I_CPX},
    {0xe1,0,0},
    {0xe2,0,0},
    {0xe3,0,0},
    {0xe4, AM_PAGEZERO, I_CPX},
    {0xe5,0,0},
    {0xe6, AM_PAGEZERO, I_INC},
    {0xe7,0,0},
    {0xe8,0,0},
    {0xe9,0,0},
    {0xea,0,0},
    {0xeb,0,0},
    {0xec, AM_DIRECT, I_CPX},
    {0xed,0,0},
    {0xee, AM_DIRECT, I_INC},
    {0xef,0,0},
    {0xf0, AM_RELATIF, I_BEQ},
    {0xf1, AM_IMPLICITE, I_TAX},
    {0xf2,0,0},
    {0xf3,0,0},
    {0xf4,0,0},
    {0xf5,0,0},
    {0xf6,0,0},
    {0xf7, AM_PREINDEXDIRECT, I_INC},
    {0xf8, AM_IMPLICITE, I_SED},
    {0xf9,0,0},
    {0xfa,0,0},
    {0xfb,0,0},
    {0xfc,0,0},
    {0xfd,0,0},
    {0xfe, AM_DIRECTINDEX_X, I_INC},
    {0xff,0,0},
};

int main(int argc, char** argv) {

    return 0;
}


